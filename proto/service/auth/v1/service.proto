syntax = "proto3";

package service.auth.v1;
option go_package = "github.com/gaesemo/tech-blog-api/go/service/auth/v1;authv1";

service AuthService {
    rpc GetAuthURL(GetAuthURLRequest) returns (GetAuthURLResponse) {}
    rpc Login(LoginRequest) returns (LoginResponse) {}
    rpc Logout(LogoutRequest) returns (LogoutResponse) {}
}

enum AuthProvider {
    AUTH_PROVIDER_UNSPECIFIED = 0;
    AUTH_PROVIDER_GITHUB = 1;
}

message GetAuthURLRequest {
    AuthProvider auth_provider = 1;
    string callback_url = 2;
}

message GetAuthURLResponse {
    string auth_url = 1;
}

message LoginRequest {
    AuthProvider auth_provider = 1;
    string auth_code = 2;
}

message LoginResponse {
    string access_token = 1; // jwt
    string session_id = 2; // uuid
    bool is_new_user = 3;
}

message LogoutRequest {
    string session_id = 1;
}

message LogoutResponse {
    bool success = 1;
}